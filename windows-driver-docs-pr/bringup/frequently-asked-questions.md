---
title: 固件 WEG 常见问题解答
description: '固件 WEG-常见问题 (常见问题解答) '
ms.date: 05/07/2018
ms.localizationpriority: medium
ms.openlocfilehash: c821786fc6c3c57ead6155854241a22948bd3875
ms.sourcegitcommit: e769619bd37e04762c77444e8b4ce9fe86ef09cb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/31/2020
ms.locfileid: "89187633"
---
# <a name="firmware-weg-frequently-asked-questions-faq"></a>固件 WEG：常见问题 (常见问题解答) 

以下常见问题是由于仍在使用 Windows 7 的计算机数而产生的。

请将其他问题或意见发送到 <SAUEFI@Microsoft.com> 。

**问：** 如果我在 Skylake 上安装 Windows 7，应选择哪些配置？ 是否应启用固件 CSM (Config \# 2) 或旧启动 MBR (config \# 3) ？ 如果是旧式启动模式，为什么？

> **答：** 具体而言，对于 Windows 7，建议使用配置 \# 2。 你将需要启用 CSM 并将默认设置为 UEFI 引导，并仅在需要时回退到旧启动。 需要禁用安全启动。
>
> Windows 7 不能支持配置 \# 1。 当高分辨率图形驱动程序 (不可用时，Windows 7 依赖于 Int10 的支持，例如错误检测、睡眠转换等 ) ，这是由 CSM 满足的依赖项。 如果) 提供 Int10 支持 (启用了部分 CSM，则可以在 UEFI 模式下启动 Win7。 如果固件默认为 UEFI 启动模式，而启用了 Int10 CSM，则 Win7 将在 UEFI 模式下成功安装。 在 UEFI 模式下安装时，Microsoft 还将 TPM 2.0 支持向后移植到 Windows 7。 有关详细信息，请参阅此知识库文章： [KB2920188](https://support.microsoft.com/help/2920188/update-to-add-support-for-tpm-2-0-in-windows-7-and-windows-server-2008)。
>
> Microsoft 建议你应使用配置 \# 2;不应使用旧的 MBR 启动模式。

**问：** 如果安装了启用了 CSM 的 Windows 7，分区表/磁盘配置的外观将是什么？

> **答：** 这取决于固件中的启动设备优先级默认值。 如果已启用 CSM 并将其加载到内存中，这可能会导致默认情况下，安装介质会默认安装到旧式 MBR。
>
> 如果启动到旧启动模式并进行安装，则通常会有2个分区 (如 diskpart.exe "列表分区" ) 所示。 第一个分区处于活动状态并作为 "系统分区" 列出，文件系统类型为 NTFS 且带有隐藏的 \\ 启动文件夹。 第二个分区是将 \\ Windows 安装在另一个 NTFS 分区上的位置。
>
> 如果 Windows 在 UEFI 模式下安装，则安装将 (ESP) 为文件系统类型 Fat32 创建 EFI 系统分区，将 Microsoft 保留分区 (MSR) 为 RAW，并使用 NTFS 作为 OS/数据分区。 如果你装入并查看 ESP，你应该会看到一个文件夹 \\ EFI 启动文件夹， (文件夹可能会) 隐藏。
>
> 由于你将需要在适用于 Windows 7 的系统固件中启用 CSM，因此，在启动到安装媒体 (CD/DVD/USB) 时，可能需要专门选择 UEFI 启动模式，以便在 UEFI 启动模式下安装 Windows 7。
> 有关启动选项和 BIOS 配置的详细信息，请咨询 PC 制造商。

**问：** 如果我在传统启动模式下安装了 CSM 的 Windows 7 (配置 \# 3) ，升级路径是什么？

> **答：** 此配置的升级路径 (\# 3) 仍然受 Windows 10 支持。 尽管不能使用安全启动，因为它仅在 UEFI 配置1中可用 \# 。 如果你想要将系统切换为 UEFI 引导，则需要使用 UEFI 启动模式对原始操作系统进行格式化，并使用分区的磁盘分区重新安装该操作系统。 \#如果要从 windows 应用商店或联机安装进行升级，则无需在此转换过程中保持 CSM 处于启用状态，除非你需要启动到 windows 7 (config 2) 。
> 建议使用 \# 纯 UEFI 环境的 CSM 禁用) 直接转到 config 1 (，这是在固件支持时使用安全启动。

**问：** 将固件从启用了旧 BIOS 启动的 CSM 切换到启用了旧 BIOS 启动 (config \# 3) 到 csm 启用了 UEFI 启动 (config \# 2) 并返回时是否存在任何用户影响？

> **答：** 这取决于您的切换方式。 如果从配置3更改 \# 为配置 \# 3，然后尝试启动，则系统可能无法启动。 如果此时更改回配置 \# 3，则不会对系统、磁盘或操作系统进行任何进一步更改。 你应该能够使用原始配置 n 重新启动到原始操作系统 \# 。 建议 *不要* 更改 BIOS 设置，而是 "按原样升级"。

**问：** 从配置 \# 2 更改为配置 \# 1 以启用安全启动：

> **答：** 对于更高版本的系统;post 2015 (Skylake) ，如果系统启用了 CSM，禁用了安全引导 (它们应互相排斥) 并使用 UEFI Boot 方法将操作系统安装到 GPT 磁盘。 升级到 Win10 + 后，它应该是关闭 CSM 并在固件中启用安全启动的简单过程 (如果在工厂中设置了安全启动并且是固件) 中的一个选项。
>
> 如果在进行更改后，系统无法启动，则系统可能会将系统配置为使用 CSM 的旧式 BIOS 进行引导。 如果是这种情况，则需要 Win10 + 安装介质，或 (Windows 7) 的原始操作系统的干净安装。 确保启用 CSM，并为 UEFI 启动模式设置安装/磁盘分区，稍后会在 UEFI 引导模式下升级到 Win10。
>
> 请确保选择 "UEFI 启动" 以安装媒体，固件配置可能需要进一步更改 BIOS 设置才能启动 UEFI 安装。
>
> 有关启动选项和 BIOS 配置的详细信息，请咨询 PC 制造商。

**问：** 用户正在运行 Windows 7，升级到 Win 10 之前，BIOS/固件切换为 UEFI。

> **答：** \[假设之前已在旧版 BIOS 启动模式下安装操作系统。\]
>
> 如果安装 Windows 10 的用户完成了安装/设置。 Windows 安装程序将在旧版 MBR BIOS 启动模式下检测磁盘，并尝试相应地进行安装。 根据系统、启动方法、安装媒体 (（如果自定义) ），结果可能会有所不同。 但是，你可能会收到一条消息，指出此启动方法不支持该磁盘格式。 如果收到此消息，则可以轻松地对磁盘进行格式化和全新安装。 警告：如果格式化磁盘，则会 **丢失** 磁盘上的所有数据。
>
> 建议将设置改回切换之前的设置。 这样就可以启动到已安装的操作系统。 备份要保存到外部存储位置的任何数据。 接下来，请尝试重新设置磁盘 (清理现有分区的硬盘，在 UEFI 模式下启动到媒体，并对 GPT 磁盘) 执行全新安装。
>
> 警告如果启用了 CSM （如配置2中的）， \# 则可能会有安装媒体默认情况下为 MBR 启动的情况。 如果操作系统是以旧版 MBR 启动模式安装的，则为。 如果没有再次重新设置磁盘并在 UEFI 引导模式下将操作系统安装到 GPT 磁盘，将无法启用安全启动。 你可能想要了解有关启动选项、BIOS 配置选项以及固件更新和安全启动选项的详细信息。

**问：** UEFI 是否支持从 MBR 分区磁盘启动？

> **答：** 不能，仅在 BIOS 模式下启动时才支持从 MBR 分区磁盘启动。 如果 CSM 存在并已启用，则应利用 CSM 的旧 BIOS 启动方法来支持旧启动。

**问：** 32位和64位 UEFI 的依赖关系是什么？

> **答：** Microsoft 支持32和64位 UEFI。 OS 和 UEFI 固件的位数必须匹配。  (例如，如果你有一个64位 UEFI 固件，则必须安装64位 Windows OS) 。

**问：** 能否以编程方式切换固件设置？

> **答：** 不是，大多数固件设置不是标准化的，Microsoft 不提供允许以编程方式修改固件设置的工具。 查看电脑制造商以了解详细信息，因为可能有可用于管理和配置的工具。

**问：** 如何从 CSM 启用旧的 BIOS 启动 (config \# 3) 到 csm 启用了 UEFI boot (config \# 2) 会影响安全启动行为？

> **答：** 只有在禁用了 CSM 的 UEFI 模式下才支持安全启动。 如果在将系统交付给客户之前未在工厂地面上预先配置安全启动，则可能无法使用此选项。 如果系统以前已启用安全启动，但为当前的 Windows 7 OS 禁用了 (使用降级) 权限，则它可能与禁用 CSM 并启用安全启动一样简单。 但是，如果清理了分区，并且未设置为 UEFI 启动到 GPT 磁盘。 然后，将需要清理磁盘，并在打开安全启动之前重新安装用于 UEFI 启动的操作系统。
>
> 在进行任何更改之前，请与原始设备制造商联系 (OEM) ，以确保系统支持安全启动。
>
> **注意** 即使在其他分区中，清除磁盘也会销毁该磁盘上的所有数据。

**问：** 对 BitLocker 和非 Microsoft 磁盘加密工具的任何依赖项？

> **答：** 是，切换 UEFI/旧版本 BIOS 引导可能导致启动失败，并将固件设置切换回默认值应允许恢复。 暂停 bitlocker，并且在某些情况下，建议禁用 Bitlocker 或非 MS 加密工具，具体取决于切换是否需要擦除驱动器或只更改固件设置 (例如 CSM/安全启动) 
>
> 有关配置和默认值的详细信息，请参阅电脑或软件制造商。

**问：** 在 BIOS 切换到 UEFI 后，如何配置安全启动？

> **答：** 默认情况下，对于 Win7 设备，未实现安全启动。 如果系统附带 Windows 8 或更高版本，则很可能系统会配置安全启动，因为这是一个徽标要求。 仅电脑制造商在工厂中实现安全启动。 请与电脑制造商联系，查看他们是否能够在您的系统上安装安全启动。 可能需要将系统发送回 PC 制造商，才能安装。

**问：** 对 Windows 7 回滚/还原有何影响？

> **答：** 只要固件设置未发生任何更改，回滚到原始操作系统就会正常运行。 如果固件设置已更改，请将其更改回出厂默认设置 (它们) 回滚之前的状态。 咨询 PC 制造商，找出系统附带的 rollback 方法或恢复方法类型。

**问：** 对 WinRE 的影响有哪些？

> **答：** WinRE 将具有与安装的操作系统相同的启动进程。 如果更改了固件启动选项 (旧的 BIOS 到 UEFI) ，而不是尝试启动到操作系统或磁盘上的 WinRE，将会失败。 如果要在 USB/CD/DVD 上启动 WinRE 或 WinPE，这将使用单独的启动方法。

**问：** 如果固件为64位 UEFI 或 32-位 UEFI，则在32位与64位操作系统的依赖项/影响是从旧启动到 UEFI，反之亦然。

> **答：** Windows UEFI 启动的一个限制是，只能启动与安装的 UEFI 匹配的 OS "位数" (请参阅问题 7) 。 如果你有32位 UEFI，则只能在其上安装32位的 Windows。 64位 Windows 需要64位 UEFI 或 CSM。 但是，如果系统缺少 CSM，则无法启动 Win7 64 位 Windows 操作系统。

**问：** 是否可以在不影响数据的情况下，将使用旧 MBR 启动的系统启动转换为 GPT 启动

> **答：** 不能。 使用 Microsoft 工具（如 diskpart.exe）将导致数据丢失。 MBR 启动和 GPT 启动是两种不同的启动机制，需要对磁盘进行更改，以将从磁盘中删除所有数据才能实现此更改。 尝试进行此更改之前，请备份任何数据。

## <a name="related-resources"></a>相关资源

[UEFI 固件](/previous-versions/windows/it-pro/windows-8.1-and-8/hh824898(v=win.10))

[Windows 10 规范-Microsoft](https://www.microsoft.com/windows/windows-10-specifications)

[更新以添加对 Windows 7 和 Windows Server 2008 R2 中的 TPM 2.0 的支持](https://support.microsoft.com/help/2920188/update-to-add-support-for-tpm-2-0-in-windows-7-and-windows-server-2008)